# –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Telegram Bot (TBot)

## üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

Telegram-–±–æ—Ç –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å OTRS (Open-source Ticket Request System). –ë–æ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ Excel —Ñ–∞–π–ª–∞—Ö, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ IP-–∞–¥—Ä–µ—Å–∞–º, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OTRS –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–∫–µ—Ç–∞–º–∏, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ email-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é, –∞ —Ç–∞–∫–∂–µ –≤–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö –≤ Excel –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OTRS –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–æ—á—Ç—É

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:

**Backend:**
- Python 3.9+
- Aiogram 3.x (Telegram Bot API framework)
- Flask (–≤–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
- SQLite (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- asyncio (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

**–û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- `aiogram` - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram –±–æ—Ç–æ–≤
- `aiohttp` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã
- `openpyxl` - —Ä–∞–±–æ—Ç–∞ —Å Excel —Ñ–∞–π–ª–∞–º–∏
- `msoffcrypto-tool` - —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö Excel —Ñ–∞–π–ª–æ–≤
- `flask` + `flask-cors` - –≤–µ–±-–ø–∞–Ω–µ–ª—å
- `python-dotenv` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `bcrypt` - —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- `ldap3` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Active Directory
- `beautifulsoup4` - –ø–∞—Ä—Å–∏–Ω–≥ HTML (legacy)

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `pywin32` - –¥–ª—è Windows-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- `nest_asyncio` - –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö event loops

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
tbot/
‚îú‚îÄ‚îÄ main/                          # –û—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ aiogram_bot.py        # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å Telegram –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ web_admin.py          # Flask –≤–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handlers/             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ excel_handler.py  # –ü–æ–∏—Å–∫ –≤ Excel —Ñ–∞–π–ª–∞—Ö
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ monitor_handler.py # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ monitor_db.py     # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ otrs_handler.py   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OTRS
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ otrs_auth.py      # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π OTRS
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ mdaemon_handler.py # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Active Directory
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ip_manager.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞–º–∏
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ping_handler.py   # Ping –ø—Ä–æ–≤–µ—Ä–∫–∏ (legacy)
‚îÇ   ‚îú‚îÄ‚îÄ templates/                 # HTML —à–∞–±–ª–æ–Ω—ã –¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ verify.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ set_password.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ servers.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ip_addresses.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metrics.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.html
‚îÇ   ‚îú‚îÄ‚îÄ static/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (CSS, JS)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ css/style.css
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formatters.py         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ monitor.db            # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ –í—Å–µ –ü–ö V2.0.xlsx      # Excel –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
‚îú‚îÄ‚îÄ requirements.txt               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ Makefile                      # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Windows PowerShell)
‚îú‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ .env                          # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
```

---

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤ `main/data/monitor.db` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

### 1. `servers` - –°–µ—Ä–≤–µ—Ä—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `id` (INTEGER PRIMARY KEY)
- `name` (TEXT NOT NULL) - –ò–º—è —Å–µ—Ä–≤–µ—Ä–∞
- `ip` (TEXT NOT NULL) - IP-–∞–¥—Ä–µ—Å
- `server_group` (TEXT NOT NULL) - –ì—Ä—É–ø–ø–∞ —Å–µ—Ä–≤–µ—Ä–∞
- `first_seen` (TIMESTAMP) - –ö–æ–≥–¥–∞ –≤–ø–µ—Ä–≤—ã–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω
- `last_seen` (TIMESTAMP) - –ü–æ—Å–ª–µ–¥–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- UNIQUE(name, server_group)

### 2. `events` - –°–æ–±—ã—Ç–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ (UP/DOWN)
- `id` (INTEGER PRIMARY KEY)
- `server_id` (INTEGER) - FK –Ω–∞ servers
- `event_type` (TEXT) - 'UP' –∏–ª–∏ 'DOWN'
- `event_time` (TIMESTAMP) - –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è
- `duration_seconds` (INTEGER) - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

### 3. `metrics` - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
- `id` (INTEGER PRIMARY KEY)
- `server_id` (INTEGER UNIQUE) - FK –Ω–∞ servers
- `total_uptime_seconds` (INTEGER) - –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- `total_downtime_seconds` (INTEGER) - –û–±—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è
- `downtime_count` (INTEGER) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–¥–µ–Ω–∏–π
- `longest_downtime_seconds` (INTEGER) - –°–∞–º—ã–π –¥–æ–ª–≥–∏–π –ø—Ä–æ—Å—Ç–æ–π
- `last_status` (TEXT) - 'UP', 'DOWN', 'UNKNOWN'
- `last_status_change` (TIMESTAMP)

### 4. `daily_stats` - –î–Ω–µ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `id` (INTEGER PRIMARY KEY)
- `server_id` (INTEGER) - FK –Ω–∞ servers
- `date` (DATE) - –î–∞—Ç–∞
- `uptime_seconds` (INTEGER)
- `downtime_seconds` (INTEGER)
- `downtime_count` (INTEGER)
- UNIQUE(server_id, date)

### 5. `persistent_messages` - –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è Telegram
- `id` (INTEGER PRIMARY KEY)
- `chat_id` (INTEGER)
- `topic_id` (INTEGER)
- `message_type` (TEXT) - 'dashboard', 'metrics', etc.
- `message_id` (INTEGER) - ID —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram
- `created_at` (TIMESTAMP)
- `updated_at` (TIMESTAMP)
- UNIQUE(chat_id, topic_id, message_type)

### 6. `pending_deletions` - –û—á–µ—Ä–µ–¥—å —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- `id` (INTEGER PRIMARY KEY)
- `chat_id` (INTEGER)
- `topic_id` (INTEGER)
- `message_id` (INTEGER)
- `delete_after` (TIMESTAMP)
- `created_at` (TIMESTAMP)
- UNIQUE(chat_id, message_id)

### 7. `otrs_users` - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ OTRS
- `id` (INTEGER PRIMARY KEY)
- `telegram_id` (INTEGER UNIQUE) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
- `telegram_username` (TEXT)
- `full_name` (TEXT) - –ü–æ–ª–Ω–æ–µ –∏–º—è –∏–∑ Active Directory
- `otrs_email` (TEXT NOT NULL) - Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `otrs_username` (TEXT)
- `verified_at` (TIMESTAMP)
- `created_at` (TIMESTAMP)

### 8. `otrs_pending_verifications` - –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `id` (INTEGER PRIMARY KEY)
- `telegram_id` (INTEGER UNIQUE)
- `email` (TEXT NOT NULL)
- `code` (TEXT NOT NULL) - 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
- `expires_at` (TIMESTAMP)
- `created_at` (TIMESTAMP)

### 9. `otrs_ticket_messages` - –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–∏–∫–µ—Ç—ã
- `id` (INTEGER PRIMARY KEY)
- `ticket_id` (INTEGER)
- `ticket_number` (TEXT)
- `message_id` (INTEGER)
- `chat_id` (INTEGER)
- `topic_id` (INTEGER)
- `ticket_state` (TEXT)
- `sent_at` (TIMESTAMP)
- `updated_at` (TIMESTAMP)
- UNIQUE(ticket_id, chat_id, topic_id)

### 10. `otrs_user_metrics` - –ú–µ—Ç—Ä–∏–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `id` (INTEGER PRIMARY KEY)
- `telegram_id` (INTEGER)
- `telegram_username` (TEXT)
- `otrs_email` (TEXT)
- `action_type` (TEXT) - 'closed', 'rejected', 'assigned', 'commented'
- `ticket_id` (INTEGER)
- `ticket_number` (TEXT)
- `ticket_title` (TEXT)
- `action_time` (TIMESTAMP)
- `details` (TEXT)

### 11. `user_private_tickets` - –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ç–∏–∫–µ—Ç–∞–º–∏
- `id` (INTEGER PRIMARY KEY)
- `telegram_id` (INTEGER)
- `ticket_id` (INTEGER)
- `ticket_number` (TEXT)
- `message_id` (INTEGER)
- `assigned_at` (TIMESTAMP)
- UNIQUE(telegram_id, ticket_id)

### 12. `web_users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–µ–±-–ø–∞–Ω–µ–ª–∏
- `email` (TEXT PRIMARY KEY)
- `password_hash` (TEXT) - –•—ç—à –ø–∞—Ä–æ–ª—è (bcrypt)
- `created_at` (TIMESTAMP)
- `last_login` (TIMESTAMP)
- `password_set_at` (TIMESTAMP)

### 13. `ad_users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ Active Directory (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- `email` (TEXT PRIMARY KEY)
- `full_name` (TEXT)
- `first_name` (TEXT)
- `last_name` (TEXT)
- `is_active` (INTEGER) - 0 –∏–ª–∏ 1
- `synced_at` (TIMESTAMP)

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
TOKEN=your_telegram_bot_token              # –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
SUPERCHAT_TOKEN=-1001234567890            # ID —á–∞—Ç–∞ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ–ø–∏–∫–æ–≤ (Topic IDs):

```env
EXCEL_TOPIC_ID=38                          # –¢–æ–ø–∏–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ Excel
PING_TOPIC_ID=40                           # –¢–æ–ø–∏–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
BOT_TOPIC_ID=42                            # –¢–æ–ø–∏–∫ –¥–ª—è –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
METRICS_TOPIC_ID=0                         # –¢–æ–ø–∏–∫ –¥–ª—è –º–µ—Ç—Ä–∏–∫ (0 = –æ—Ç–∫–ª—é—á–µ–Ω–æ)
TASKS_TOPIC_ID=145                         # –¢–æ–ø–∏–∫ –¥–ª—è –∑–∞—è–≤–æ–∫ OTRS
```

### Excel —Ñ–∞–π–ª:

```env
EXCEL_FILE_PATH=\\fs\it$\6. –ù–∞—à–∞\1. –û–±—â–∞—è\3. –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ò–¢\–í—Å–µ–ü–ö.xlsx
EXCEL_PASSWORD=your_excel_password         # –ü–∞—Ä–æ–ª—å –¥–ª—è Excel —Ñ–∞–π–ª–∞
```

### OTRS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

```env
OTRS_URL=https://otrs.company.ru           # URL OTRS —Å–µ—Ä–≤–µ—Ä–∞
OTRS_USERNAME=api_user                     # –õ–æ–≥–∏–Ω –¥–ª—è OTRS API
OTRS_PASSWORD=api_password                 # –ü–∞—Ä–æ–ª—å –¥–ª—è OTRS API
OTRS_WEBSERVICE=TelegramBot                # –ò–º—è Web Service –≤ OTRS
```

### SMTP (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏):

```env
SMTP_HOST=smtp.company.ru                  # SMTP —Å–µ—Ä–≤–µ—Ä
SMTP_PORT=587                              # –ü–æ—Ä—Ç (587 –¥–ª—è TLS, 465 –¥–ª—è SSL)
SMTP_USER=noreply@company.ru               # Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
SMTP_PASSWORD=smtp_password                # –ü–∞—Ä–æ–ª—å SMTP
SMTP_FROM_NAME=OTRS Bot                    # –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
SMTP_USE_TLS=true                          # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS (true/false)
```

### Active Directory:

```env
DOMAIN_SERVER=192.168.1.10                 # IP –∏–ª–∏ FQDN –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ–º–µ–Ω–∞
DOMAIN_PORT=389                            # –ü–æ—Ä—Ç LDAP (389 –∏–ª–∏ 636 –¥–ª—è LDAPS)
DOMAIN_BASE_DN=dc=company,dc=local        # Base DN (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –µ—Å–ª–∏ –ø—É—Å—Ç–æ)
DOMAIN_BIND_DN=                            # Bind DN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DOMAIN_BIND_PASSWORD=                      # –ü–∞—Ä–æ–ª—å –¥–ª—è Bind (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –î—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```env
IP_ADDRESSES_PATH=main/assets/ip_addresses.xml  # –ü—É—Ç—å –∫ XML (legacy, —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–î)
BOT_STARTUP_MESSAGE=ü§ñ –ë–æ—Ç –≤–∫–ª—é—á–∏–ª—Å—è –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ\!
ALLOWED_THREADS=38,40,42,164               # –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —Ç–æ–ø–∏–∫–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
LOG_FILE=bot_log.log                       # –§–∞–π–ª –ª–æ–≥–æ–≤
LOG_LEVEL=INFO                             # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG/INFO/WARNING/ERROR)
```

---

## ü§ñ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª Telegram –±–æ—Ç–∞

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:

#### `/start`
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
- –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

#### `/botexec`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã" (uptime)
- –°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è

#### `/status` (—Ç–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ OTRS
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ: email, –§–ò–û, –≤—Ä–µ–º—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### `/mystats`
- –õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ OTRS
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö, –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã—Ö, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∑–∞—è–≤–æ–∫
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

#### `/sync_mdaemon` (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ Active Directory –≤ –ë–î
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `ad_users`

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:

#### –ü–æ–∏—Å–∫ –≤ Excel (—Ç–æ–ø–∏–∫ ID: EXCEL_TOPIC_ID)

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —Ç–æ–ø–∏–∫–µ:

**–¢–∏–ø—ã –ø–æ–∏—Å–∫–∞:**

1. **–ü–æ –§–ò–û** (—á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
   - –ü—Ä–∏–º–µ—Ä—ã: "–ò–≤–∞–Ω–æ–≤", "–ü–µ—Ç—Ä", "–°–µ—Ä–≥–µ–π –ò–≤–∞–Ω–æ–≤"
   - –ò—â–µ—Ç –≤ –∫–æ–ª–æ–Ω–∫–µ "–§–ò–û"

2. **–ü–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏–ª–∏ IP-–∞–¥—Ä–µ—Å—É**
   - –ü—Ä–∏–º–µ—Ä—ã: "192.168.1.1", "2583109"
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞

3. **–ü–æ —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–∏ (WS)**
   - –ó–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "ws" (—Ä–µ–≥–∏—Å—Ç—Ä –Ω–µ –≤–∞–∂–µ–Ω)
   - –ü—Ä–∏–º–µ—Ä—ã: "ws111", "WS222"

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
- HTML —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: –§–ò–û, –ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ, WorkStation, –¢–µ–ª–µ—Ñ–æ–Ω, AD, –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
- –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–Ω–æ–≥–æ (>4000 —Å–∏–º–≤–æ–ª–æ–≤), —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–∏
- –°–æ–æ–±—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤ (—Ç–æ–ø–∏–∫ ID: PING_TOPIC_ID)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- Dashboard —Å live-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–æ–≤ (–æ–¥–Ω–æ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ (UP ‚Üí DOWN –∏–ª–∏ DOWN ‚Üí UP)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
- –ú–µ—Ç—Ä–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–æ–ø–∏–∫–µ (–µ—Å–ª–∏ METRICS_TOPIC_ID —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:**
- –°–µ—Ä–≤–µ—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü–∞ `servers`)
- –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å (—Ä–∞–∑–¥–µ–ª "IP-–∞–¥—Ä–µ—Å–∞")

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã (uptime)
- –í—Ä–µ–º—è –ø—Ä–æ—Å—Ç–æ—è (downtime)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–¥–µ–Ω–∏–π
- SLA –ø—Ä–æ—Ü–µ–Ω—Ç (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –°–∞–º—ã–π –¥–æ–ª–≥–∏–π –ø—Ä–æ—Å—Ç–æ–π

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OTRS (—Ç–æ–ø–∏–∫ ID: TASKS_TOPIC_ID)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö/–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–∞—Ö
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –∑–∞–∫—Ä—ã—Ç–∏–µ, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞

**–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
- `closed` - —Ç–∏–∫–µ—Ç –∑–∞–∫—Ä—ã—Ç
- `rejected` - —Ç–∏–∫–µ—Ç –æ—Ç–∫–ª–æ–Ω—ë–Ω
- `assigned` - —Ç–∏–∫–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω
- `commented` - –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π OTRS:**

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start` –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
2. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è"
3. –í–≤–æ–¥–∏—Ç –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π email (—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã: meb52.com, tdegregor.ru, test.com)
4. –ü–æ–ª—É—á–∞–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥ –Ω–∞ –ø–æ—á—Ç—É
5. –í–≤–æ–¥–∏—Ç –∫–æ–¥ –≤ –±–æ—Ç–µ
6. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –§–ò–û –∏–∑ Active Directory (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
7. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ç–∏–∫–µ—Ç–∞—Ö

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°—Ç–∞—Ä—ã–µ –∫–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –ö–æ–¥—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 10 –º–∏–Ω—É—Ç
- –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å email –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ –∫–æ–¥–∞

---

## üåê –í–µ–±-–ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

–í–µ–±-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:555`

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:

**–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥:**
1. –í–≤–æ–¥ email (—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã: @meb52.com, @tdegregor.ru, @test.com)
2. –ü–æ–ª—É—á–µ–Ω–∏–µ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ –ø–æ—á—Ç—É
3. –í–≤–æ–¥ –∫–æ–¥–∞
4. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ö–æ–¥–∞

**–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—Ö–æ–¥—ã:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é
- –û–ø—Ü–∏—è: "–í–æ–π—Ç–∏ –ø–æ –∫–æ–¥—É –Ω–∞ –ø–æ—á—Ç—É"

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü–∞—Ä–æ–ª–∏ —Ö—ç—à–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ bcrypt
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è: 8 —Å–∏–º–≤–æ–ª–æ–≤
- –°–µ—Å—Å–∏—è –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç (100 –ª–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ –≤—ã–π—Ç–∏ –≤—Ä—É—á–Ω—É—é)

### –°—Ç—Ä–∞–Ω–∏—Ü—ã –≤–µ–±-–ø–∞–Ω–µ–ª–∏:

#### 1. Dashboard (/dashboard)
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ç–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

#### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤ (/servers)
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å —Ç–µ–∫—É—â–∏–º —Å—Ç–∞—Ç—É—Å–æ–º
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (online/offline)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ

#### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞–º–∏ (/ip-addresses)
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≥—Ä—É–ø–ø —Å–µ—Ä–≤–µ—Ä–æ–≤
- CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è IP-–∞–¥—Ä–µ—Å–æ–≤
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `servers`)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### 4. –ú–µ—Ç—Ä–∏–∫–∏ OTRS (/metrics)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—Ç–∞–±–ª–∏—Ü–∞ —Å–æ–±—ã—Ç–∏–π)
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á—ë—Ç—ã

#### 5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (/users)
- –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π OTRS
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: Telegram ID, username, email, –§–ò–û
- –í—Ä–µ–º—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

#### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (/settings)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. OTRS (Open-source Ticket Request System)

**–ü—Ä–æ—Ç–æ–∫–æ–ª:** REST API —á–µ—Ä–µ–∑ GenericInterface

**–ú–µ—Ç–æ–¥—ã:**

- `TicketSearch` - –ø–æ–∏—Å–∫ —Ç–∏–∫–µ—Ç–æ–≤
- `TicketGet` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–∏–∫–µ—Ç–µ
- `TicketCreate` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–∫–µ—Ç–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- URL —Å–µ—Ä–≤–µ—Ä–∞ OTRS
- Credentials –¥–ª—è API
- –ò–º—è Web Service (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "TelegramBot")

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:**
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∏–∫–µ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –æ—á–µ—Ä–µ–¥—è–º –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º

### 2. Active Directory (—á–µ—Ä–µ–∑ LDAP)

**–ü—Ä–æ—Ç–æ–∫–æ–ª:** LDAP (–ø–æ—Ä—Ç 389) –∏–ª–∏ LDAPS (–ø–æ—Ä—Ç 636)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Base DN –∏–∑ rootDSE
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ email (`userPrincipalName`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ç–æ–≤: `mail`, `cn`, `displayName`, `givenName`, `sn`
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `ad_users`)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- –ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ–º–µ–Ω–∞ (IP –∏–ª–∏ FQDN)
- –ü–æ—Ä—Ç (389 –¥–ª—è LDAP, 636 –¥–ª—è LDAPS)
- Base DN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- Bind DN –∏ –ø–∞—Ä–æ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### 3. SMTP (–æ—Ç–ø—Ä–∞–≤–∫–∞ email)

**–ü—Ä–æ—Ç–æ–∫–æ–ª:** SMTP —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TLS/SSL

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- HTML –∏ plain text –≤–µ—Ä—Å–∏–∏ –ø–∏—Å–µ–º
- –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø–∏—Å–µ–º

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–µ–∂–∏–º—ã:**
- TLS (–ø–æ—Ä—Ç 587)
- SSL (–ø–æ—Ä—Ç 465)
- Plain (–±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è)

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –∑–∞–¥–∞—á–∏

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤** (`monitor_handler.py`)
   - –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å: –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   - Ping –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ dashboard —Å–æ–æ–±—â–µ–Ω–∏—è
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
   - –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –≤ –ë–î

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OTRS** (`otrs_handler.py`)
   - –ü–µ—Ä–∏–æ–¥–∏—á–Ω–æ—Å—Ç—å: –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
   - –ü–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö/–∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ó–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫ –¥–µ–π—Å—Ç–≤–∏–π

3. **–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** (`aiogram_bot.py`)
   - –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∑–∞–¥–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `pending_deletions`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

### –í–µ–±-–ø–∞–Ω–µ–ª—å (Flask):

- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
- –ü–æ—Ä—Ç: 555
- –†–µ–∂–∏–º: development (debug=False –≤ production)
- CORS: –≤–∫–ª—é—á—ë–Ω

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –í—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª (`bot_log.log`) –∏ –∫–æ–Ω—Å–æ–ª—å
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –≤—Ä–µ–º–µ–Ω–µ–º –ø–æ MSK (UTC+3)
- –£—Ä–æ–≤–Ω–∏: DEBUG, INFO, WARNING, ERROR, CRITICAL
- –†–æ—Ç–∞—Ü–∏—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (–ª–æ–≥–∏ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è)

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤:**
```
YYYY-MM-DD HH:MM:SS [LEVEL] module_name: message
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:**
- `modules.aiogram_bot` - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
- `modules.web_admin` - –≤–µ–±-–ø–∞–Ω–µ–ª—å
- `modules.handlers.*` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `utils.logger` - —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (Windows):

```powershell
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
python -m venv .venv
.venv\Scripts\activate
pip install -r requirements.txt

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞
# –°–æ–∑–¥–∞–π—Ç–µ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

# 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
cd main
python main.py
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Makefile:

```powershell
make install    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make start      # –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
make stop       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make restart    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
make status     # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
make logs       # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make logs-follow # –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
make run        # –ó–∞–ø—É—Å–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
make clean      # –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
```

### Windows Service (—á–µ—Ä–µ–∑ BAS.py):

```powershell
python BAS.py install  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å
python BAS.py start    # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
python BAS.py stop     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
python BAS.py remove   # –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
```

### –ü–æ–ª–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:

```powershell
cd S:\Projects\tbot; Get-Process python -ErrorAction SilentlyContinue | Stop-Process -Force; Start-Sleep -Seconds 2; cd main; S:\Projects\tbot\.venv\Scripts\python.exe main.py
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:

1. **Telegram –±–æ—Ç:**
   - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ email-–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
   - –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏: 6 —Ü–∏—Ñ—Ä, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 10 –º–∏–Ω—É—Ç
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–∞ email (whitelist)
   - –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∫–æ–¥–æ–≤ –ø—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

2. **–í–µ–±-–ø–∞–Ω–µ–ª—å:**
   - –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥: –∫–æ–¥ –Ω–∞ –ø–æ—á—Ç—É
   - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—Ö–æ–¥—ã: –ø–∞—Ä–æ–ª—å (bcrypt)
   - –û–ø—Ü–∏—è –≤—Ö–æ–¥–∞ –ø–æ –∫–æ–¥—É
   - –°–µ—Å—Å–∏–∏ –±–µ–∑ –∏—Å—Ç–µ—á–µ–Ω–∏—è (–Ω–æ –º–æ–∂–Ω–æ –≤—ã–π—Ç–∏)

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:

- –ü–∞—Ä–æ–ª–∏: bcrypt —Ö—ç—à–∏
- –ö–æ–¥—ã –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏: –≤ –ø–∞–º—è—Ç–∏ (–≤–µ–±) –∏–ª–∏ –ë–î (Telegram)
- –¢–æ–∫–µ–Ω—ã: –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: SQLite —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ

### –î–æ—Å—Ç—É–ø:

- –í–µ–±-–ø–∞–Ω–µ–ª—å: —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- Telegram –±–æ—Ç: –ø—É–±–ª–∏—á–Ω—ã–π, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: —Ñ–∞–π–ª SQLite, –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

---

## üìä –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π Telegram:

- **Parse Mode:** MarkdownV2 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, HTML –¥–ª—è —Ç–∞–±–ª–∏—Ü
- **Escape —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è MarkdownV2
- **–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π:** –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ asyncio.create_task
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ID –≤ –ë–î –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤:

- **Ping –ø—Ä–æ–≤–µ—Ä–∫–∞:** subprocess —Å ping –∫–æ–º–∞–Ω–¥–æ–π
- **–¢–∞–π–º–∞—É—Ç:** 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏:** 30 —Å–µ–∫—É–Ω–¥
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π dashboard:** –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- **–ú–µ—Ç—Ä–∏–∫–∏:** –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –¥—Ä—É–≥–æ–º —Ç–æ–ø–∏–∫–µ

### –†–∞–±–æ—Ç–∞ —Å Excel:

- **–ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ msoffcrypto-tool
- **–ß—Ç–µ–Ω–∏–µ:** openpyxl –≤ —Ä–µ–∂–∏–º–µ read_only
- **–ü–æ–∏—Å–∫:** –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–æ–∫–∞–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** HTML —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ tabulate

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

- **SQLite:** —Ñ–∞–π–ª–æ–≤–∞—è –ë–î, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞
- **–°–æ–µ–¥–∏–Ω–µ–Ω–∏—è:** —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–±–µ–∑ connection pooling)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —á–µ—Ä–µ–∑ ALTER TABLE —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- **–ò–Ω–¥–µ–∫—Å—ã:** –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö (telegram_id, action_time)

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **SQLite –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏:** –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –º–æ–∂–µ—Ç –±—ã—Ç—å bottleneck
2. **–ü–∞–º—è—Ç—å –∫–æ–¥–æ–≤ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏:** –∫–æ–¥—ã –≤–µ–±-–ø–∞–Ω–µ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
3. **–ù–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤:** —Ñ–∞–π–ª `bot_log.log` —Ä–∞—Å—Ç—ë—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è:** –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
5. **–ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç DDoS:** –≤–µ–±-–ø–∞–Ω–µ–ª—å –Ω–µ –∏–º–µ–µ—Ç rate limiting

---

## üîÆ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

1. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è:**
   - –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã
   - Redis –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏
   - Leader election –¥–ª—è scheduled –∑–∞–¥–∞—á
   - Healthcheck –∏ heartbeat –º–µ—Ö–∞–Ω–∏–∑–º—ã

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - Connection pooling –¥–ª—è –ë–î
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –≤ Excel
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ (asyncio.gather)
   - Rate limiting –¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
   - API –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
   - Webhooks –¥–ª—è —Å–æ–±—ã—Ç–∏–π
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
   - –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –≤–µ–±-–ø–∞–Ω–µ–ª–∏
   - –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
   - Audit log –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:** MSK (UTC+3) - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

**–ö–æ–¥–∏—Ä–æ–≤–∫–∞:** UTF-8 –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º:**
- Windows (–æ—Å–Ω–æ–≤–Ω–∞—è)
- Linux/Docker (—á–∞—Å—Ç–∏—á–Ω–æ, —á–µ—Ä–µ–∑ Dockerfile)

**–í–µ—Ä—Å–∏—è Python:** 3.9+

**–õ–∏—Ü–µ–Ω–∑–∏—è:** –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∞–Ω–∏–∏

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –≤ —Ç–æ–ø–∏–∫ Excel –∏–º—è –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω
   - –ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML —Ç–∞–±–ª–∏—Ü—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
   - –°–æ–æ–±—â–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤:**
   - –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
   - –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

3. **–†–∞–±–æ—Ç–∞ —Å —Ç–∏–∫–µ—Ç–∞–º–∏ OTRS:**
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–∏–∫–µ—Ç–∞ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–∏–∫–µ—Ç –≤ –æ–±—â–µ–º —á–∞—Ç–µ –∏ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
   - –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å:**
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤—Ö–æ–¥–∏—Ç –ø–æ –ø–∞—Ä–æ–ª—é
   - –î–æ–±–∞–≤–ª—è–µ—Ç/—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ –º–µ—Ç—Ä–∏–∫–∏
   - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

–≠—Ç–æ –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Telegram Bot. –í—Å–µ –¥–µ—Ç–∞–ª–∏, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

