# Улучшения поиска по телефонам

## Что было сделано

### 1. Улучшен поиск по телефону в `employee_repository.py`

**Было:**
- Только точное совпадение телефона

**Стало:**
- Сначала ищет точное совпадение (с нормализацией - убирает пробелы, дефисы, скобки)
- Если точное совпадение не найдено, ищет частичное совпадение
- Нормализует телефон перед поиском (убирает пробелы, дефисы, скобки)

### 2. Улучшена проверка телефона в `employee_search.py`

**Было:**
- Проверка `value.isdigit() and len(value) >= 4`

**Стало:**
- Проверка с нормализацией (убирает пробелы, дефисы, скобки)
- Минимум 3 цифры (как в старом боте)

## Как работает поиск

1. **Определение типа запроса:**
   - Если запрос - IP-адрес → поиск по IP
   - Если запрос - только цифры (минимум 3) → поиск по телефону
   - Если запрос начинается с "ws" → поиск по рабочей станции
   - Иначе → поиск по имени

2. **Поиск по телефону:**
   - Нормализует запрос (убирает пробелы, дефисы, скобки)
   - Ищет точное совпадение (с нормализацией)
   - Если не найдено, ищет частичное совпадение

## Примеры

- `400` → найдет телефоны "400", "400 ", "400-400", "(400)" и т.д.
- `500` → найдет телефоны "500", "5000", "500-123" и т.д.
- `111` → найдет телефоны "111", "1111", "111-222" и т.д.

## Совместимость со старым ботом

Логика поиска по телефону теперь работает так же, как в старом боте:
- Точное совпадение (с нормализацией)
- Частичное совпадение (если точное не найдено)

